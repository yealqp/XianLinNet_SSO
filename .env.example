# ============================================
# OAuth Server - Environment Configuration
# ============================================
# This file contains all available configuration options with example values.
# Copy this file to .env and update the values for your environment.

# ============================================
# Application Configuration
# ============================================
# Application name
APP_NAME=OAuth Server

# Application environment: development, production, test
APP_ENV=production

# Log level: debug, info, warn, error
LOG_LEVEL=info

# Origin URL for the OAuth server
ORIGIN=http://localhost:8080

# Frontend origin URL (for CORS)
ORIGIN_FRONTEND=http://localhost:8080

# ============================================
# Server Configuration
# ============================================
# Server port
PORT=8080

# Read timeout (e.g., 10s, 1m)
READ_TIMEOUT=10s

# Write timeout (e.g., 10s, 1m)
WRITE_TIMEOUT=10s

# Maximum request body size in bytes (default: 4MB)
BODY_LIMIT=4194304

# ============================================
# Database Configuration (PostgreSQL)
# ============================================
# Database host
DB_HOST=localhost

# Database port
DB_PORT=5432

# Database name
DB_NAME=oauth_server

# Database user
DB_USER=postgres

# Database password
DB_PASSWORD=your-database-password

# SSL mode: disable, require, verify-ca, verify-full
DB_SSLMODE=disable

# Maximum number of open connections to the database (default: 100)
DB_MAX_OPEN_CONNS=100

# Maximum number of idle connections in the pool (default: 10)
DB_MAX_IDLE_CONNS=10

# Maximum lifetime of a connection (e.g., 1h, 30m) (default: 1h)
DB_CONN_MAX_LIFETIME=1h

# Maximum idle time of a connection (e.g., 10m, 5m) (default: 10m)
DB_CONN_MAX_IDLE_TIME=10m

# Query timeout (e.g., 5s, 10s) (default: 5s)
DB_QUERY_TIMEOUT=5s

# ============================================
# Redis Configuration (Optional)
# ============================================
# Redis host
REDIS_HOST=localhost

# Redis port
REDIS_PORT=6379

# Redis password (leave empty if no password)
REDIS_PASSWORD=

# Redis database number (0-15)
REDIS_DB=0

# ============================================
# JWT Configuration
# ============================================
# JWT secret key (REQUIRED - minimum 32 characters)
# Generate a secure random string for production
JWT_SECRET=your-secret-key-change-in-production-min-32-chars

# Access token expiry in seconds (default: 3600 = 1 hour)
JWT_ACCESS_TOKEN_EXPIRY=3600

# Refresh token expiry in seconds (default: 604800 = 7 days)
JWT_REFRESH_TOKEN_EXPIRY=604800

# ============================================
# Captcha Configuration (Cap.js)
# ============================================
# Enable/disable captcha verification
CAPTCHA_ENABLED=true

# Cap.js instance URL
CAPTCHA_INSTANCE_URL=https://captcha.example.com

# Cap.js site key (public key)
CAPTCHA_SITE_KEY=your-site-key

# Cap.js secret key (private key)
CAPTCHA_SECRET=your-captcha-secret

# ============================================
# SMTP Email Configuration
# ============================================
# Enable/disable email sending
SMTP_ENABLED=true

# SMTP server host
SMTP_HOST=smtp.example.com

# SMTP server port (587 for TLS, 465 for SSL)
SMTP_PORT=465

# Use SSL/TLS for SMTP connection
SMTP_USE_SSL=true

# SMTP username
SMTP_USER=noreply@example.com

# SMTP password
SMTP_PASSWORD=your-smtp-password

# Email "From" address
SMTP_FROM=noreply@example.com

# Email "From" name
SMTP_FROM_NAME=OAuth Server

# ============================================
# Default Admin Configuration
# ============================================
# REQUIRED if no admin user exists in the database
# These settings are used to create the initial admin user on first startup
# All three fields are REQUIRED - the application will fail to start if not configured

# Admin email address
ADMIN_EMAIL=admin@example.com

# Admin password (minimum 6 characters)
ADMIN_PASSWORD=change-this-password

# Admin username
ADMIN_USERNAME=admin

# ============================================
# Real Name Verification API Configuration
# ============================================
# Enable/disable real name verification API
VERIFY_API_ENABLED=false

# Real name verification API URL
VERIFY_API_URL=https://verify.example.com

# ============================================
# Real Name Verification Configuration
# ============================================
# Enable/disable real name verification
VERIFY_API_ENABLED=true

# Aliyun ID Card Verification API URL
IDCARD_API_URL=https://sfzsmyxb.market.alicloudapi.com/get/idcard/checkV3

# Aliyun API AppCode (REQUIRED for ID card verification)
# Get your AppCode from Aliyun Market: https://market.aliyun.com/
IDCARD_APP_CODE=your-aliyun-appcode-here
